{% extends 'base.html' %}
{% block title %}OptiFeat - تاریخچه{% endblock %}
{% block content %}
<section class="card">
    <h1>تاریخچه اجراها</h1>
    {% if history %}
        <div class="history-list">
        {% for item in history %}
            <div class="history-item">
                <h3>{{ item.dataset_name }} <small>#{{ item.id }}</small></h3>
                <p>دقت: {{ '%.3f'|format(item.accuracy) }}</p>
                <p>بودجه زمانی: {{ item.time_budget }}</p>
                <p>هزینه کل ویژگی‌ها: {{ '%.3f'|format(item.total_cost_all_features) }} ثانیه</p>
                <p>هزینه انتخاب شده: {{ '%.3f'|format(item.selected_cost) }} ثانیه</p>
                <p>ویژگی‌ها: </p>
                <table style="border-collapse: collapse; width: 50%; border: 1px solid #000;">
                    <tr>
                        <th style="border: 1px solid #000; padding: 2px;">ردیف</th>
                        <th style="border: 1px solid #000; padding: 2px;">نام ویژگی</th>
                    </tr>

                    {% for feature in item.selected_features %}
                    <tr>
                        <td style="border: 1px solid #000; padding: 2px; text-align: center;">{{ loop.index }}</td>
                        <td style="border: 1px solid #000; padding: 2px; text-align: center;">{{ feature }}</td>
                    </tr>
                    {% endfor %}
                </table>
                <details>
                    <summary>گزارش مراحل</summary>
                    <ul>
                        {% for step in item.steps %}
                            <li>{{ step }}</li>
                        {% endfor %}
                    </ul>
                </details>
            </div>
        {% endfor %}
        </div>
    {% else %}
        <p>هنوز تاریخچه‌ای ثبت نشده است.</p>
    {% endif %}
</section>
{% endblock %}
